<!DOCTYPE html>

<html>

<head>
   <title>Darlene Laguna Art</title>
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <link href="styles.css" rel="stylesheet" type="text/css">
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
   <script language="JavaScript" src=scripts.js></script>
</head>

<body class="body" oncontextmenu="return false;">


<script>

function load_image_caption()
{
   var file_path_prefix = image_file_name.split('.')[0];


   load_data_from_file(file_path_prefix+"_title.txt","image_title",false);
   load_data_from_file(file_path_prefix+"_dimensions.txt","image_dimensions",false);
   load_data_from_file(file_path_prefix+"_paragraph.txt","image_paragraph",false);
}

</script>

<script>

   var adjusted_image_height = 0;
   var adjusted_image_width  = 0;
   var art_caption_style     = "";
   var container_class       = "image_container_two_column";
   var container_style       = 2;
   var height_ratio          = 1;
   var image                 = "";
   var image_file_name       = "";
   var image_height          = 0;
   var image_width           = 0;
   var image_style           = "";
   var minimum_caption_width = 200;
   var one_column_container  = 1;
   var two_column_container  = 2;
   var width_ratio           = 1;
   var URL_string            = window.location.search;
   var URL_parameters        = new URLSearchParams(URL_string);


   image_file_name = URL_parameters.get("image_file_name");

   if ( (image_file_name == null) || (image_file_name == "") )
   {
      alert("Error:  Invalid parameter passed to display_image.html");

      history.back();
   }

   image     = new Image();
   image.src = image_file_name;

   image.onload = function()
   {
      image_width  = this.width;
      image_height = this.height;

      width_ratio  = image_width/window.innerWidth;
      height_ratio = image_height/window.innerHeight;

      adjusted_image_width  = image_width/height_ratio;
      adjusted_image_height = image_height/width_ratio;

      if (window.innerWidth >= window.innerHeight)
      {
         if (image_height >= image_width)
         {
            container_style = two_column_container;
         }
         else
         {
            if (adjusted_image_height > window.innerHeight)
            {
               container_style = two_column_container;
            }
            else
            {
               container_style = one_column_container;
            }
         }
      }
      else
      {
         if (image_width >= image_height)
         {
            container_style = one_column_container;
         }
         else
         {
            if (adjusted_image_width > window.innerWidth)
            {
               container_style = one_column_container;
            }
            else
            {
               container_style = two_column_container;
            }
         }
      }

      if (container_style == two_column_container)
      {
         // Image height equals viewport height

         if (CSS.supports('height', '100dvh'))
         {
            image_style = "width: auto; height: 100dvh";
         }
         else
         {
            image_style = "width: auto; height: 100vh";
         }

         container_class = "image_container_two_column";

         art_caption_style = "style=\"max-width: 500px; padding-top: 5px\"";

         if ( (adjusted_image_width + minimum_caption_width) > (window.innerWidth) )
         {
            image_style = "width: 100%; height: auto";

            container_class = "image_container_one_column";

            art_caption_style = "style=\"height: auto; padding-left: 10px\"";
         }
      }
      else
      {
         // Image width equals viewport width

         image_style = "width: 100%; height: auto";

         container_class = "image_container_one_column";

         art_caption_style = "style=\"height: auto\"";
      }

      document.open();

      var d = document;

      d.writeln('<!DOCTYPE html>');
      d.writeln('');
      d.writeln('<html>');
      d.writeln('');
      d.writeln('<head>');
      d.writeln('   <title>Darlene Laguna Art</title>');
      d.writeln('   <meta name="viewport" content="width=device-width, initial-scale=1">');
      d.writeln('   <link href="styles.css" rel="stylesheet" type="text/css">');
      d.writeln('   <script language="JavaScript" src=scripts.js><\/script>');
      d.writeln('</head>');
      d.writeln('');
      d.writeln('<body class="body" onload="load_image_caption();" oncontextmenu="return false;">');
      d.writeln('');
      d.writeln('');
      d.writeln('<div class='+container_class+'>');
      d.writeln('');
      d.writeln('   <div style="display: inline-block; position: relative">');
      d.writeln('      <img src="'+image_file_name+'" style="'+image_style+'">');
      d.writeln('      <button id="back_button" class="back_button" onclick="history.back()">&times;</button>');
      d.writeln('   </div>');
      d.writeln('');
      d.writeln('   <div class="art_caption" '+art_caption_style+'>');
      d.writeln('      <span id="image_title" class="art_title"></span><br>');
      d.writeln('      <span id="image_dimensions" class="art_dimensions"></span><br>');
      d.writeln('      <span id="image_paragraph" class="art_paragraph"></span>');
      d.writeln('   </div>');
      d.writeln('');
      d.writeln('</div>');
      d.writeln('');
      d.writeln('');
      d.writeln('</body>');
      d.writeln('');
      d.writeln('</html>');

      d.close();
   }

</script>


</body>

</html>